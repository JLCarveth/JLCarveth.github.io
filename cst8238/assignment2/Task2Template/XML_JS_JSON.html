
<!DOCTYPE html>
<html>


<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Task 2 of Assignment 2 - JavaScript and JSON</title>
	<meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


<script type="text/javascript">
		
		
function convertXMLtoJSON() {
	//Write code to retrieve  the content of the XML file using JavaScript.
	var data = new XMLHttpRequest();
	var booksJSON = {
		"catalog" : [
			// Parsed books will be stored here 
		]
	}
	data.open("GET","Books.xml");
	data.addEventListener("load", function () {
		var books = this.responseXML.getElementsByTagName("book");
		for (i=0; i<books.length;i++) {
			var book = {
				"author" : books[i].getElementsByTagName("author")[0].innerHTML,
				"title" : books[i].getElementsByTagName("title")[0].innerHTML,
				"genre" : books[i].getElementsByTagName("genre")[0].innerHTML,
				"price" : books[i].getElementsByTagName("price")[0].innerHTML,
				"publish_date" : books[i].getElementsByTagName("publish_date")[0].innerHTML,
				"description" : books[i].getElementsByTagName("description")[0].innerHTML
			}
			booksJSON.catalog[i] = book;
		}
		
		var table = document.getElementById('table');
		table.deleteRow(0);
		var header = table.createTHead();
		var row = header.insertRow(0);

		var headerAuthor = row.insertCell(0);
		headerAuthor.innerHTML = "<b>Author</b>";
		var headerTitle = row.insertCell(1);
		headerTitle.innerHTML = "<b>Title</b>";
		var headerGenre = row.insertCell(2);
		headerGenre.innerHTML = "<b>Genre</b>";
		var headerPrice = row.insertCell(3);
		headerPrice.innerHTML = "<b>Price</b>";
		var headerPublishDate = row.insertCell(4);
		headerPublishDate.innerHTML = "<b>Publish Date</b>";
		var headerDescription = row.insertCell(5);
		headerDescription.innerHTML = "<b>Description</b>";

		x=1;
		booksJSON.catalog.forEach((book) => {
			var row = table.insertRow(x++);
			var author = row.insertCell(0);
			author.innerHTML = book.author;
			var title = row.insertCell(1);
			title.innerHTML = book.title;
			var genre = row.insertCell(2);
			genre.innerHTML = book.genre;
			var price = row.insertCell(3);
			price.innerHTML = book.price;
			var publish_date = row.insertCell(4);
			publish_date.innerHTML = book.publish_date;
			var description = row.insertCell(5);
			description.innerHTML = book.description;
		})
	})
	data.send();
	
    //Write code to create an array of JSON objects equivalent to the provided XML file (Each book info is an instance of a JSON object).

	
	//Write Javascript loop statement to display the elements of the array of JSON objects 
	
	
} // End function
</script>
</head>

<body>
<h3>Task 2 of Assignment 2- Displaying Array of JSON objects </h3>
    
    <table id="table" style="border:1px solid black;">      
        	<tr>			    
				<td><input onclick="convertXMLtoJSON()" name="btnConvertJSON" id="btnConvertJSON" value="JSONDisplay!" type="button"></td>
		    </tr>       
   </table>
</body>
</html>